diff --git a/scripts/link-vmlinux.sh b/scripts/link-vmlinux.sh
index 59a3df87907e..1f40bdc9f6b1 100755
--- a/scripts/link-vmlinux.sh
+++ b/scripts/link-vmlinux.sh
@@ -227,6 +227,9 @@ gen_btf()
 		# pahole 1.18 through 1.21 can't handle zero-sized per-CPU vars
 		extra_paholeopt="${extra_paholeopt} --skip_encoding_btf_vars"
 	fi
+	if [ "${pahole_ver}" -ge "124" ]; then
+		extra_paholeopt="${extra_paholeopt} --skip_encoding_btf_enum64"
+	fi
 	if [ "${pahole_ver}" -ge "121" ]; then
 		extra_paholeopt="${extra_paholeopt} --btf_gen_floats"
 	fi
